### 2.2.1 HTTP概况

Web的应用层协议是**超文本传输协议**（HyperText Transfer Protocol, HTTP）。HTTP由两个程序实现，一个客户程序和一个服务器程序。客户和服务器程序一般运行在不同的端系统中，通过交换HTTP报文进行会话。HTTP定义了这些报文的结构以及客户和服务器进行报文交换的方式。

HTTP使用TCP作为它的支撑运输协议。

HTTP客户首先发起一个与服务器的TCP连接，一旦连接建立，该浏览器和服务器进程就可以通过套接字接口访问TCP。客户向它的套接字接口发送HTTP请求报文并从它的套接字接口接收HTTP响应报文。服务器也类似。

HTTP是一个无状态协议，也就是说HTTP服务器并不保存关于客户的任何信息。

【Q：那么，cookie的意义是什么？】

### 2.2.2 非持续连接和持续连接

**非持续连接**（non-persistent connection）：每个请求/响应对是经一个单独的TCP连接发送。

**持续连接**（persistent connection）：所有的请求及响应经相同的TCP连接发送。

HTTP既能使用非持续连接，也能使用持续连接。HTTP默认方式下使用持续连接，不过HTTP客户和服务器也能配置成使用非持续连接。

**往返时间**（往返时间 Round-Trip Time，RTT）：一个短分组从客户到服务器然后再返回客户所花费的时间。RTT包括分组传播时延、分组在中间路由器和交换机上的排队时延以及分组处理时延。

简单估算，从客户请求HTML基本文件到该客户收到整个文件所花费的时间。粗略的讲， 总的响应时间就是两个**RTT**（往返时间 Round-Trip Time）加上服务器传输HTML文件的时间（三次握手）。

1 采用非持续连接的HTTP

缺点：第一，分别为每一个请求的对象建立和维护一个全新的连接。对于每个这样的连接，在客户和服务器中都要分配TCP的缓冲区和保持TCP变量。第二，每一个对象经受两倍的**RTT**（往返时间 Round-Trip Time）交付时延。即一个RTT用于创建TCP，另一个RTT用于请求和接收一个对象。

2 采用持续连接的HTTP 

没有上述非持续性连接的缺点

【Q：那么，非持续连接的优点是什么呢？】
【Q：那么，持续连接的缺点是什么呢？为什么会有人选择非持续性连接】

2.2.3 HTTP报文格式

HTTP规范 [ RFC 1945; RFC 2616; RFC 7540 ]包含了对HTTP报文格式的定义。HTTP报文有两种：请求报文和响应报文。

1 HTTP请求报文

典型例子如下：

```
GET /somedir/page.html HTTP/1.1
Host: www.someschool.edu
Connection: close
User-agent: Mozilla/5.0
Accept-language: fr
```

