接收主机怎样将一个到达的运输层报文段定向到适当的套接字中？

每个运输层报文段中具有几个字段。在接收端，运输层检查这些字段，标识出接收套接字，进而将报文段定向到该套接字。将运输层报文段中的数据交付到正确的套接字的工作称为**多路分解**（demultiplexing）。

在源主机从不同的套接字中收集数据块，并为每个数据块封装上首部信息从而生成报文段，然后将报文段传递到网络层，所有这些工作称为**多路复用**（multiplexing）

运输层多路复用要求：（1）套接字有唯一标识符。（2）每个报文段有特殊字段来指示该报文段所要交付到的套接字。这些特殊字段是**源端口号字段**（source port number field）和**目的端口号字段**（destination port number field）。端口号是一个16比特的数，大小在0~65535之间。0~1023范围的端口号称为**周知端口号**（well-known port number），是受限制的，这是指它们保留给诸如HTTP、FTP之类的周知应用层协议来使用。

#### 1 无连接的多路复用与多路分解

一个UDP套接字是由一个二元组全面标识的，该二元组包含一个目的IP地址和一个目的端口号。因此，如果两个UDP报文段有不同的源IP地址和/或源端口号，但具有相同的目的IP地址和目的端口号，那么这两个报文段将通过相同的套接字被定向到相同的目的进程。

#### 2 面向连接的多路复用与多路分解

一个TCP套接字是由一个四元组（源IP地址，源端口号，目的IP地址，目的端口号）来标识的。因此，当一个TCP报文段从网络到达一台主机时，该主机使用全部4个值来将报文段定向（分解）到相应的套接字。特别与UDP不同的是，两个具有不同源IP地址或源端口号的到达TCP报文段将被定向到两个不同的套接字，除非TCP报文段携带了初始创建连接的请求。

#### 3 Web服务器与TCP


