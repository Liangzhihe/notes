### 2.1.1 网络应用程序体系结构

**应用程序体系结构**（application architecture）

1 **客户-服务器体系结构**（client-server architecture）

利用客户-服务端体系结构，客户相互之间不直接通信。   
服务器具有周知的、固定的地址，该地址称为IP地址。因为该服务器总是打开的，客户总是能够通过向该服务器的IP地址发送分组来与其联系。

具有客户-服务器体系结构的非常著名的应用程序包括Web、FTP、Telnet（就是远程登陆）和电子邮件。

配备大量主机的**数据中心**（data center）常被用于创建强大的虚拟服务器（一个数据中心能够有数十万台服务器），用来为大量客户提供服务。


2 **P2P体系结构**（P2P architecture）

在一个P2P体系结构中，对位于数据中心的专用服务器有最小的（或者没有）依赖。相反，应用程序在间断连接的主机对之间使用直接通信，这些主机对被称为**对等方**。许多目前流行的、流量密集型应用都是P2P体系结构的。包括文件共享（如BitTorrent）、对等方协助下载加速器（如迅雷）、因特网电话和视频会议（如Skype）。

P2P体系存在一个特性叫做**自扩展性**（self-scalability）。例如，在一个P2P文件共享应用中，尽管每个对等方都由于请求文件产生工作负载，但每个对等方通过向其他对等方分发文件也为系统增加服务能力。

某些应用具有混合的体系结构，结合客户-服务器和P2P的元素。例如，对于许多即时讯息应用而言，服务器被用于跟踪用户的IP地址，但用户到用户的报文在用户主机之间（无需通过中间服务器）直接发送。


### 2.1.2 进程通信

用操作系统的术语来讲，进行通信的实际上是**进程**（process）而不是程序。一个进程可以被认为是运行在端系统上的一个程序。当多个进程运行在相同的端系统上时，它们使用进程间通信机制相互通信。

在两个不同端系统上的进程，通过跨越计算机网络交换报文而互信通信。发送进程生成并向网络中发送报文；接受进程接收这些报文并可能通过回传报文进行响应。

#### 1 客户（client）和服务器（server）进程

网络应用程序由成对的进程组成，这些进程通过网络互相发送报文。在一对进程之间的通信会话场景中，发起通信的进程被标识为客户，在会话开始时等待联系的进程是服务器。

#### 2 进程与计算机网络之间的接口

进程通过一个称为**套接字**（socket）的软件接口向网络发送报文和从网络接收报文。套接字是同一台主机内应用层与运输层之间的接口。由于该套接字是建立网络应用程序的可编程接口，因此，套接字也称为应用程序和网络之间的**应用程序编程接口**（Application Programming Interface， API）。应用程序开发者可以控制套接字在应用层端的一切，但是对该套接字的运输层端几乎没有控制权。

应用程序开发者对于运输层的控制权限仅限于（1）选择运输层协议；（2）也许能设置几个运输层参数，如最大缓存和最大报文段长度等。

#### 进程寻址

