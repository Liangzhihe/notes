## 2.5 P2P文件分发

如，一个单一的服务器需要向大量主机发送一个大文件。在P2P文件分发中，每个对等方能够向任何其他对等方重新分发他已经收到的该文件的任何部分，从而在分发过程中协助该服务器。

最为流行的P2P分发协议是BitTorrent

#### 1 P2P体系结构的扩展性

对于客户-服务器体系结构，随着对等方数量的增加，分发时间呈线性增长并且没有界，然而，对于P2P体系结构，最小分发时间不仅总是小于客户-服务器体系架构的分发时间，并且对于任意的对等方数量，时间也总是小于一个固定的边界。

#### 2 BitTorrent

BitTorrent是一种用于文件分发的流行P2P协议。用BitTorrent的术语来讲，参与一个特定文件分发的所有对等方的集合被称为一个**洪流**（torrent）。在一个洪流中的对等方彼此下载等长度的文件块（chunk），典型的块长度为256KB。当一个对等方首次加入一个洪流时，它没有块。随着时间的流逝，它积累了越来越多的块。当它下载块时，也为其他对等方上载了多个块。一旦某对等方获得了整个文件，它也许（自私地）离开洪流，或（大公无私地）留在该洪流中并继续向其他对等方上载块。同时，任何对等方可能在任何时候仅具有块的子集就离开该洪流，并在以后重新加入该洪流中。

每个洪流具有一个基础设施节点，称为**追踪器**（tracker）。当一个对等方加入洪流时，它向追踪器注册自己，并周期地通知追踪器它仍在该洪流中。

当新的对等方（如Alice）加入该洪流时，追踪器随机地从参与对等方的集合中选择对等方的一个子集（例如，50个），并将子集中对等方的IP地址发送给Alice。Alice持有对等方的这张列表，试图与该列表上的所有对等方创建并行的TCP连接。我们称所有这样与Alice成功地创建一个TCP连接的对等方为‘邻近对等方’。随着时间的流逝，这些对等方中的某些可能离开，其他对等方（最初50个以外的）可能试图与Alice创建TCP连接。因此，一个对等方的邻近对等方将随时间而波动。

**最稀缺优先**（rarest first）

**疏通**（unchoked）

## 2.6 视频流和内容分发网

### 2.6.1 因特网视频

### 2.6.2 HTTP流和DASH

DASH：经HTTP的动态适应性流（Dynamic Adaptive Streaming over HTTP）。

### 2.6.3 内容分发网（Content Distribution Network, CDN）

#### 1 CDN操作

#### 2 集群选择策略



